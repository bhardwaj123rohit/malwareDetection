package malwaredetectionandroid;

import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.Logger;

public class classifier {

	train trainer;
	double theta[];
	double input[][];
	double yinput[];
	double b=0.0;
	
        public static int classify(String args) throws IOException {
        
            
                int inputHist[];
                classifier cl=new classifier();
                cl.trainer =new train();
                cl.theta=cl.trainer.theta;
                
                
                inputHist=CallGraphExample.findhist(args);
                
                double[] similarity = cl.trainer.k.similarity(inputHist);
                
                double out=0;
                for(int j=0;j<cl.theta.length;j++)
			{
				out+=similarity[j]*cl.theta[j];
				
			}
			
				out+=cl.b;
                                
                                if(out>0)
                                    return 1;
                                else
                                    return 0;
			
                
                
                
                          
                
            
            
            
    }
        
        /*
	public static void train(String a[])
	{
		
		classifier cl=new classifier();
		cl.trainer =new train();
		
		try {
			cl.trainer.loaddata();
			
			for(int i=0;i<5;i++)
			cl.trainer.trainer();
			
			
			
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		} catch (Exception e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		
		
		System.out.println("trained svm");
		
		cl.theta=cl.trainer.theta;
		cl.input=cl.trainer.input;
		cl.yinput=cl.trainer.yinput;
		
		double youtput[]=new double[cl.yinput.length];
		
		for(int i=0;i<youtput.length;i++)
		{
			for(int j=0;j<cl.theta.length;j++)
			{
				youtput[i]+=cl.input[i][j]*cl.theta[j];
				
			}
			
				youtput[i]+=cl.b;
			
		}
		
		int tot=0,corr=0;
		
		
		for(int i=0;i<youtput.length;i++)
		{
			System.out.println(i+" "+youtput[i]+" "+cl.yinput[i] );
			if(youtput[i]>0&&cl.yinput[i]==1.0)
			{
				
				corr++;
				
			}
			
			tot++;
			
		}
		
		double per=(corr*100)/tot;
		
		System.out.println("percentage "+per);
		
		
		
	}*/
	
	
	
	
	
	
}
